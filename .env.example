# IT-Friends Phone Agent - Environment Variables
# ==============================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
#
# All variables use ITF_ prefix
# Nested values use double underscore: ITF_SECTION__SUBSECTION__KEY

# =============================================================================
# BASIC CONFIGURATION
# =============================================================================

# Environment: development, staging, production
# NOTE: Default is 'development' for safety. Set to 'production' only in real deployments!
ITF_ENV=development

# Device identification (auto-generated if not set)
# ITF_DEVICE_ID=pi-12345678

# Logging
ITF_LOG_LEVEL=INFO
ITF_LOG_JSON=true

# API Server
ITF_API_HOST=0.0.0.0
ITF_API_PORT=8080

# JWT Authentication (REQUIRED for production!)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# WARNING: Replace this placeholder with a secure secret before deploying!
ITF_JWT_SECRET_KEY=REPLACE_ME_CHANGE_THIS_SECRET
ITF_JWT_EXPIRY_MINUTES=60

# =============================================================================
# DATABASE
# =============================================================================

# SQLite (default - single device)
ITF_DATABASE__URL=sqlite+aiosqlite:///data/phone_agent.db

# PostgreSQL (multi-device or high-volume)
# ITF_DATABASE__URL=postgresql+asyncpg://user:password@localhost:5432/phone_agent

# =============================================================================
# TELEPHONY - Twilio (Cloud VoIP)
# =============================================================================

ITF_TELEPHONY__TWILIO__ENABLED=false
ITF_TELEPHONY__TWILIO__ACCOUNT_SID=
ITF_TELEPHONY__TWILIO__AUTH_TOKEN=
ITF_TELEPHONY__TWILIO__FROM_NUMBER=+49XXXXXXXXXX
ITF_TELEPHONY__TWILIO__WEBHOOK_URL=https://your-domain.com/api/v1/webhooks/twilio

# Optional: Messaging Service for advanced SMS routing
ITF_TELEPHONY__TWILIO__MESSAGING_SERVICE_SID=

# =============================================================================
# TELEPHONY - sipgate (German VoIP)
# =============================================================================

ITF_TELEPHONY__SIPGATE__ENABLED=false
ITF_TELEPHONY__SIPGATE__USERNAME=
ITF_TELEPHONY__SIPGATE__PASSWORD=
ITF_TELEPHONY__SIPGATE__API_TOKEN=
ITF_TELEPHONY__SIPGATE__CALLER_ID=

# =============================================================================
# TELEPHONY - FreeSWITCH (Self-hosted SIP)
# =============================================================================

ITF_TELEPHONY__FREESWITCH__ENABLED=false
ITF_TELEPHONY__FREESWITCH__HOST=127.0.0.1
ITF_TELEPHONY__FREESWITCH__PORT=8021
ITF_TELEPHONY__FREESWITCH__PASSWORD=

# =============================================================================
# SMS GATEWAY
# =============================================================================

ITF_INTEGRATIONS__SMS__ENABLED=false
ITF_INTEGRATIONS__SMS__PROVIDER=twilio

# Uses Twilio credentials above when provider=twilio

# =============================================================================
# EMAIL GATEWAY
# =============================================================================

ITF_INTEGRATIONS__EMAIL__ENABLED=false
ITF_INTEGRATIONS__EMAIL__PROVIDER=sendgrid
ITF_INTEGRATIONS__EMAIL__FROM_EMAIL=noreply@praxis-name.de
ITF_INTEGRATIONS__EMAIL__FROM_NAME=Praxis Dr. Name
ITF_INTEGRATIONS__EMAIL__REPLY_TO=info@praxis-name.de

# --- SendGrid (Recommended) ---
ITF_INTEGRATIONS__EMAIL__SENDGRID__API_KEY=
ITF_INTEGRATIONS__EMAIL__SENDGRID__WEBHOOK_URL=https://your-domain.com/api/v1/webhooks/email/sendgrid/events

# --- SMTP (Alternative) ---
# ITF_INTEGRATIONS__EMAIL__PROVIDER=smtp
# ITF_INTEGRATIONS__EMAIL__SMTP__HOST=smtp.gmail.com
# ITF_INTEGRATIONS__EMAIL__SMTP__PORT=587
# ITF_INTEGRATIONS__EMAIL__SMTP__USERNAME=
# ITF_INTEGRATIONS__EMAIL__SMTP__PASSWORD=
# ITF_INTEGRATIONS__EMAIL__SMTP__USE_TLS=true

# =============================================================================
# GOOGLE CALENDAR INTEGRATION
# =============================================================================

ITF_INTEGRATIONS__CALENDAR__ENABLED=true
ITF_INTEGRATIONS__CALENDAR__TYPE=google
ITF_INTEGRATIONS__CALENDAR__TIMEZONE=Europe/Berlin

# Option A: Service Account JSON file path
ITF_INTEGRATIONS__CALENDAR__GOOGLE__CREDENTIALS_FILE=/app/secrets/google-calendar-credentials.json

# Option B: Service Account JSON as string (for containerized deployments)
# ITF_INTEGRATIONS__CALENDAR__GOOGLE__CREDENTIALS_JSON='{"type":"service_account",...}'

ITF_INTEGRATIONS__CALENDAR__GOOGLE__CALENDAR_ID=primary

# =============================================================================
# PRACTICE MANAGEMENT SYSTEM (PVS)
# =============================================================================

ITF_INTEGRATIONS__PVS__ENABLED=false
ITF_INTEGRATIONS__PVS__TYPE=cgm
ITF_INTEGRATIONS__PVS__API_URL=
ITF_INTEGRATIONS__PVS__API_KEY=

# =============================================================================
# WEBHOOK SECURITY
# =============================================================================

# Validate incoming webhook signatures (recommended: true)
ITF_TELEPHONY__WEBHOOKS__VALIDATE_SIGNATURES=true

# Validate webhook source IP addresses
# RECOMMENDED: Enable in production for additional security
# Validates that webhooks come from known Twilio/sipgate IP ranges
ITF_TELEPHONY__WEBHOOKS__VALIDATE_IP=false

# Timestamp tolerance in seconds (default: 300 = 5 minutes)
ITF_TELEPHONY__WEBHOOKS__TIMESTAMP_TOLERANCE_SECONDS=300

# =============================================================================
# REMOTE MANAGEMENT (IT-Friends Cloud)
# =============================================================================

ITF_REMOTE_ENABLED=true
ITF_HEARTBEAT_INTERVAL=60
ITF_HEARTBEAT_ENDPOINT=

# =============================================================================
# AI MODELS (override defaults if needed)
# =============================================================================

# STT
# ITF_AI__STT__MODEL=distil-whisper-large-v3-german
# ITF_AI__STT__DEVICE=cpu
# ITF_AI__STT__COMPUTE_TYPE=int8

# LLM
# ITF_AI__LLM__MODEL=llama-3.2-1b-instruct-q4_k_m.gguf
# ITF_AI__LLM__N_THREADS=4
# ITF_AI__LLM__N_GPU_LAYERS=0

# TTS
# ITF_AI__TTS__MODEL=de_DE-thorsten-medium

# =============================================================================
# CAMPAIGN SCHEDULER
# =============================================================================

ITF_CAMPAIGN_SCHEDULER_ENABLED=true
ITF_CAMPAIGN_POLL_INTERVAL=60
ITF_MAX_CONCURRENT_CALLS=5
